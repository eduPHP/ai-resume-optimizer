import{c as a,o as r,b as s,r as M,f as L,g as T,h as A,d as C,F as _,i as $,u as t,n as w,j as k,k as f,a as d,t as l,l as j,p as V,v as B,w as h,e as x,q as D,m as F,s as P,W as I}from"./app-D1H7u-VF.js";import{t as U,u as S,a as E,b as N,c as H,d as G,e as Y,f as Z,g as J,h as K,i as Q,A as X,j as ee,F as q,k as te,_ as se,l as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-DSwsWZZM.js";import{c as O,_ as z}from"./loader-circle-DFSiySuy.js";import{C as re}from"./check-DAsyglqG.js";import"./Label.vue_vue_type_script_setup_true_lang-DJZOahjg.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dabgak5L.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=O("EllipsisVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=O("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=O("RecycleIcon",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=O("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function de(g,e){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}const R=()=>{var n;const g=M(window==null?void 0:window.innerWidth),e=(n=U.theme)==null?void 0:n.screens,c=()=>g.value=window==null?void 0:window.innerWidth;L(()=>window==null?void 0:window.addEventListener("resize",c)),T(()=>window==null?void 0:window.removeEventListener("resize",c));const b=A(()=>g.value<=parseInt(e.xs??"")?"xs":g.value<=parseInt(e.sm??"")?"sm":g.value<=parseInt(e.md??"")?"md":g.value<=parseInt(e.lg??"")?"lg":g.value<=parseInt(e.xl??"")?"xl":"2xl");return{width:A(()=>g.value),breakpoint:b}},pe={"aria-label":"Progress"},ue={role:"list",class:"flex flex-col gap-6 xl:gap-0 xl:flex-row xl:items-center xl:justify-between"},ce=["onClick"],me={type:"button",class:"relative flex size-12 items-center justify-center rounded-full border-green-600 border group-hover:border-green-700"},fe={class:"sr-only"},ge={class:"xl:hidden"},xe=["onClick"],ye={class:"relative flex size-12 items-center justify-center rounded-full border-gray-800 dark:border-white border dark:group-hover:border-white/80"},he={class:""},be={class:"sr-only"},_e={class:"xl:hidden"},ke=["onClick"],ve={class:"relative flex size-12 items-center justify-center rounded-full border-gray-300 dark:border-white/40 border dark:group-hover:border-white/80"},we={class:""},ze={class:"sr-only"},$e={class:"xl:hidden"},Ce=C({__name:"Steps",setup(g){let e=S();const{breakpoint:c}=R();return(b,o)=>(r(),a("nav",pe,[s("ol",ue,[(r(!0),a(_,null,$(t(e).steps,(n,i)=>(r(),a("li",{key:n.name,class:w([i!==t(e).steps.length-1?"xl:pr-20 w-full":"","relative"])},[t(e).step>i||t(e).step===i&&i===t(e).steps.length-1?(r(),a(_,{key:0},[o[0]||(o[0]=s("div",{class:"hidden absolute inset-0 xl:flex items-center","aria-hidden":"true"},[s("div",{class:"ml-12 h-0.5 w-full border-t border-green-500 border-dashed"})],-1)),s("button",{onClick:y=>t(e).setStep(i),class:w(["group w-full flex gap-6 items-center text-green-600 hover:text-green-700 cursor-pointer",{"dark:bg-[#202020] rounded-tl-2xl":t(e).step===i&&i===t(e).steps.length-1&&!["xl","2xl"].includes(t(c))}])},[s("span",me,[d(t(de),{class:"size-5","aria-hidden":"true"}),s("span",fe,l(n.name),1)]),s("span",ge,l(n.name),1)],10,ce),t(e).currentStep&&t(e).step===i&&i===t(e).steps.length-1&&!["xl","2xl"].includes(t(c))?(r(),k(j({...t(e).currentStep.stepComponent}),{key:0})):f("",!0)],64)):t(e).step===i&&!["xl","2xl"].includes(t(c))?(r(),a(_,{key:1},[o[1]||(o[1]=s("div",{class:"hidden absolute inset-0 xl:flex items-center","aria-hidden":"true"},[s("div",{class:"ml-12 h-0.5 w-full border-t border-gray-800 dark:border-white/40 border-dashed"})],-1)),s("button",{type:"button",onClick:y=>t(e).setStep(i),class:w(["w-full group flex gap-6 items-center dark:text-white hover:text-white/80 cursor-pointer",{"dark:bg-[#202020] rounded-tl-2xl":!["xl","2xl"].includes(t(c))}]),"aria-current":"step"},[s("span",ye,[s("span",he,l(i+1),1),s("span",be,l(n.name),1)]),s("span",_e,l(n.name),1)],10,xe),["xl","2xl"].includes(t(c))?f("",!0):(r(),k(j({...t(e).currentStep.stepComponent}),{key:0}))],64)):(r(),a(_,{key:2},[o[2]||(o[2]=s("div",{class:"hidden absolute inset-0 xl:flex items-center","aria-hidden":"true"},[s("div",{class:"ml-12 h-0.5 w-full border-t border-gray-400 dark:border-white/40 border-dashed"})],-1)),s("button",{type:"button",onClick:y=>t(e).setStep(i),class:"group flex gap-6 items-center text-gray-400 dark:text-white/40 dark:hover:text-white/80 cursor-pointer","aria-current":"step"},[s("span",ve,[s("span",we,l(i+1),1),s("span",ze,l(n.name),1)]),s("span",$e,l(n.name),1)],8,ke)],64))],2))),128))])]))}}),Se={class:"absolute right-2 top-3"},Oe={class:"flex flex-col items-stretch gap-2"},je={class:"flex items-center justify-between px-3 py-2"},Me=C({__name:"OptimizationPopover",setup(g){const e=S(),c=E(),b=N(),o=M(!1),n=()=>{e.form.status="editing",e.step=0,e.latestStep=3,o.value=!1},i=()=>{e.loading=!0,o.value=!1,Q(e).then(p=>{e.setOptimization(p.data.optimization),e.form.status="complete",b.success("Complete Optimization","The optimization was successfully re-generated.")})},y=async()=>{try{const p=e.form.optimizationId;if(!p)return;const u=await X().put(route("optimizations.toggle-applied",p));u.data.success&&(e.form.applied=u.data.applied,c.replace({id:p,role_company:e.form.role.company,status:e.form.status,applied:u.data.applied,ai_response:e.form.response}),b.success(e.form.applied?"Applied":"Not Applied",`Successfully set as ${e.form.applied?"applied":"not applied"}!`))}catch(p){console.error("Error toggling applied status:",p),b.error("Error","Failed to update application status")}finally{o.value=!1,e.loading=!1}};return(p,u)=>V((r(),a("div",Se,[t(e).form.optimizationId?(r(),k(t(K),{key:0,open:o.value,"onUpdate:open":u[2]||(u[2]=v=>o.value=v)},{default:h(()=>[d(t(H),{"as-child":"",onClick:u[0]||(u[0]=v=>o.value=!1)},{default:h(()=>[d(t(G),{size:"lg",class:"px-4 data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground"},{default:h(()=>[d(t(ae),{class:"ml-auto size-4"})]),_:1})]),_:1}),d(t(Y),{class:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:"right",align:"start","side-offset":4,"update-position-strategy":"always"},{default:h(()=>[s("div",Oe,[t(e).form.role.url?(r(),k(t(z),{key:0,"text-position":"left",target:"_blank",as:"a",href:t(e).form.role.url,onClick:u[1]||(u[1]=v=>o.value=!1)},{default:h(()=>[d(t(le)),u[3]||(u[3]=x(" Apply "))]),_:1},8,["href"])):f("",!0),s("div",je,[d(t(Z),{"model-value":t(e).form.applied,"onUpdate:modelValue":y,disabled:t(e).loading},{default:h(()=>[s("span",{class:w(["text-sm",t(e).form.applied?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"])},l(t(e).form.applied?"Applied":"Not Applied"),3)]),_:1},8,["model-value","disabled"])]),d(t(z),{"text-position":"left",disabled:t(e).loading,variant:t(e).loading?"ghost":"outline",type:"button",size:"lg",onClick:i},{default:h(()=>[d(t(ne)),u[4]||(u[4]=x(" Regenerate "))]),_:1},8,["disabled","variant"]),d(t(z),{"text-position":"left",disabled:t(e).loading,variant:t(e).loading?"ghost":"outline",type:"button",size:"lg",onClick:n},{default:h(()=>[d(t(ie)),u[5]||(u[5]=x(" Edit "))]),_:1},8,["disabled","variant"]),d(J,{"text-position":"left"})])]),_:1})]),_:1},8,["open"])):f("",!0)],512)),[[B,!t(e).loading]])}}),Ae={class:"mx-auto flex h-full w-full flex-1 flex-col gap-4 rounded-xl p-4 xl:w-[950px]"},qe={class:"relative bg-gray-300/10 px-8 py-6 dark:bg-[#202020]"},Le={class:"flex items-center justify-between"},Ee={class:"flex items-center gap-1"},Ne={class:"text-2xl"},Re={class:"mt-4 text-xl"},We={class:"text-gray-600 dark:text-gray-400"},Te={key:0},Ve={class:"text-gray-600 dark:text-gray-400"},Be={class:"text-gray-600 dark:text-gray-400"},De={class:"text-gray-600 dark:text-gray-400"},Fe={key:1,class:"mt-6 text-xl text-yellow-500 bg-clip-text bg-gray-400 dark:bg-transparent dark:text-yellow-400"},Pe={key:2,class:"text-yellow-500 bg-clip-text bg-gray-400 dark:bg-transparent dark:text-yellow-400"},Ie={class:"block"},Ue={class:"block text-yellow-500 bg-clip-text bg-gray-400 dark:bg-transparent dark:text-yellow-400/70"},He={key:3,class:"mt-6 text-xl text-red-400"},Ge={key:4,class:"text-red-400"},Ye={class:"block"},Ze={class:"block text-red-400/70"},Je={key:5,class:"mt-6 text-xl"},Ke={key:6,class:"mb-4 mt-4"},Qe={class:"flex flex-col-reverse justify-end gap-2 pb-8 xl:flex-row xl:pb-0"},Xe=C({__name:"CompleteOptimization",setup(g){const e=S(),c=D();return(b,o)=>{var n,i,y,p,u,v;return r(),a("div",Ae,[s("div",qe,[s("div",Le,[s("div",Ee,[t(e).form.applied?(r(),k(t(re),{key:0,class:"text-green-400"})):f("",!0),s("h1",Ne,l(t(e).form.role.company)+" "+l(t(e).form.role.name)+" Application",1)]),d(Me,{class:"absolute right-2 top-3"})]),s("h2",Re,[o[2]||(o[2]=x(" Compatibility score: ")),s("span",{class:w(["font-bold",t(e).compatibilityStyle])},l(t(e).form.response.compatibility_score)+"%",3),o[3]||(o[3]=x(" Match "))]),s("p",We,l(t(e).form.response.reasoning),1),(n=t(e).form.response.top_choice)!=null&&n.length?(r(),a("div",Te,[o[4]||(o[4]=s("hr",{class:"mx-auto my-8 max-w-xl border-t border-gray-300 dark:border-gray-500"},null,-1)),o[5]||(o[5]=s("h2",{class:"mt-4 text-xl"},"Top Choice Message",-1)),s("p",Ve,l(t(e).form.response.top_choice),1)])):f("",!0),o[9]||(o[9]=s("hr",{class:"mx-auto my-8 max-w-xl border-t border-gray-300 dark:border-gray-500"},null,-1)),o[10]||(o[10]=s("h2",{class:"mt-6 text-xl"},"Role Specific Professional Summary",-1)),s("p",Be,l(t(e).form.response.professional_summary),1),o[11]||(o[11]=s("hr",{class:"mx-auto my-8 max-w-xl border-t border-gray-300 dark:border-gray-500"},null,-1)),o[12]||(o[12]=s("h2",{class:"mt-4 text-xl"},"Alignments:",-1)),(r(!0),a(_,null,$(t(e).form.response.strong_alignments,m=>(r(),a("div",{key:m.title,class:"mt-4"},[s("h3",null,l(m.title),1),s("p",De,l(m.description),1)]))),128)),t(e).form.response.moderate_gaps.length?(r(),a("h2",Fe,"Moderate Gaps:")):f("",!0),t(e).form.response.moderate_gaps.length?(r(),a("div",Pe,[s("ul",null,[(r(!0),a(_,null,$(t(e).form.response.moderate_gaps,m=>(r(),a("li",{key:m.title},[s("span",Ie,l(m.title),1),s("span",Ue,l(m.description),1)]))),128))])])):f("",!0),t(e).form.response.missing_requirements.length?(r(),a("h2",He,"Missing Requirements:")):f("",!0),t(e).form.response.missing_requirements.length?(r(),a("div",Ge,[s("ul",null,[(r(!0),a(_,null,$(t(e).form.response.missing_requirements,m=>(r(),a("li",{key:m.title},[s("span",Ye,l(m.title),1),s("span",Ze,l(m.description),1)]))),128))])])):f("",!0),o[13]||(o[13]=s("hr",{class:"mx-auto my-8 max-w-xl border-t border-gray-300 dark:border-gray-500"},null,-1)),(i=t(e).form.response.cover_letter)!=null&&i.length?(r(),a("h2",Je,"Cover Letter:")):f("",!0),(y=t(e).form.response.cover_letter)!=null&&y.length?(r(),a("div",Ke,[o[8]||(o[8]=s("p",{class:"text-gray-600 dark:text-gray-400"},"Dear Hiring manager,",-1)),(r(!0),a(_,null,$(t(e).form.response.cover_letter??[],(m,W)=>(r(),a("p",{key:`${m}-${W}`,class:"py-2 text-gray-600 dark:text-gray-400"},l(m),1))),128)),s("p",null,[o[6]||(o[6]=x("Regards,")),o[7]||(o[7]=s("br",null,null,-1)),x(l((p=t(c).props.auth)==null?void 0:p.user.name),1)])])):f("",!0)]),s("div",Qe,[d(t(z),{disabled:t(e).loading||!((u=t(e).form.response.cover_letter)!=null&&u.length),variant:t(e).loading||!((v=t(e).form.response.cover_letter)!=null&&v.length)?"ghost":"outline",type:"button",size:"lg",onClick:o[0]||(o[0]=m=>t(ee)(t(e)))},{default:h(()=>[d(t(q)),o[14]||(o[14]=x(" Download Cover Letter "))]),_:1},8,["disabled","variant"]),d(t(z),{disabled:t(e).loading,type:"button",size:"lg",onClick:o[1]||(o[1]=m=>t(te)(t(e)))},{default:h(()=>[d(t(q)),o[15]||(o[15]=x(" Download Optimized Resume "))]),_:1},8,["disabled"])])])}}}),et={class:"mx-auto flex h-full w-full min-w-80 flex-1 flex-col gap-4 rounded-xl p-4 xl:w-[950px]"},tt=C({__name:"OptimizationWizard",setup(g){const e=S(),{breakpoint:c}=R();return(b,o)=>{var n;return r(),a("div",et,[d(t(Ce)),["xl","2xl"].includes(t(c))&&t(e).currentStep?(r(),k(j({...(n=t(e).currentStep)==null?void 0:n.stepComponent}),{key:0})):f("",!0)])}}}),st={key:0,class:"flex flex-col items-center justify-center h-[85vh]"},ot={key:1,class:"flex flex-col items-center justify-center h-[85vh]"},pt=C({__name:"Optimization",props:{step:{type:Number,default:0},optimization:{type:Object,default:()=>({})}},setup(g){const e=S(),c=E(),b=N(),o=g,n=M([{title:"New Optimization",href:"/optimizations/create"}]),i=()=>{e.form.status="processing",oe().then(y=>{e.setOptimization(y.data.optimization),c.replace(y.data.optimization),b.success("Complete","Optimization was successfully completed."),I.visit(route("optimizations.show",y.data.optimization.id),{preserveState:!0})})};return L(()=>{e.setOptimization(o.optimization),e.form.optimizationId&&(n.value=[{title:"Optimizations",href:"#"},{title:e.form.role.company,href:"/optimizations/"+e.form.optimizationId}])}),(y,p)=>(r(),a(_,null,[d(t(F),{title:t(e).pageTitle},null,8,["title"]),d(se,{breadcrumbs:n.value},{default:h(()=>[t(e).form.status==="processing"?(r(),a("div",st,p[0]||(p[0]=[s("h1",{class:"text-2xl font-bold"},"Optimization In Progress",-1),s("p",{class:"mt-2 text-gray-400 text-center"},[x("This might take a minute or two or three... "),s("br"),x(" You will be notified (here) when it is done ;)")],-1)]))):f("",!0),t(e).form.status==="failed"?(r(),a("div",ot,[p[2]||(p[2]=s("h1",{class:"text-2xl font-bold"},"Optimization Failed",-1)),p[3]||(p[3]=s("p",{class:"mt-2 text-gray-400 text-center"},[x("There were some problem processing this optimization request "),s("br"),x(" Although we won't provide you with an specific reason yet, you can retry it if you want.")],-1)),d(t(z),{type:"button",size:"lg",class:w(["flex-1 xl:flex-none select-none",{"cursor-not-allowed":t(e).loading}]),disabled:t(e).loading,onClick:P(i,["prevent"])},{default:h(()=>p[1]||(p[1]=[x("Retry")])),_:1},8,["class","disabled"])])):["draft","pending","editing"].includes(t(e).form.status)?(r(),k(tt,{key:2})):t(e).form.status==="complete"?(r(),k(Xe,{key:3})):f("",!0)]),_:1},8,["breadcrumbs"])],64))}});export{pt as default};
