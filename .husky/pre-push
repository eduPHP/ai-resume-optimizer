#!/bin/sh

echo "ğŸ” Checking for changes in resources/js..."

CHANGED_JS=$(git diff --cached --name-only | grep '^resources/js/')

if [ -z "$CHANGED_JS" ]; then
  echo "âœ… No JS changes detected. Skipping build."
  exit 0
fi

echo "ğŸ“¦ JS changes detected. Running build..."
npm run build

if [ $? -ne 0 ]; then
  echo "âŒ Build failed. Push blocked."
  exit 1
fi

echo "âœ… Build succeeded. Proceeding with push."
